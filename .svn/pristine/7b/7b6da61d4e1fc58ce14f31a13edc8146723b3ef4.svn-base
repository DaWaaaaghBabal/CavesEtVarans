package character;

import java.awt.Point;
import java.util.Observable;

import skills.SkillContext;
import skills.SkillCost;
import sprite.CharacterSprite;
import sprite.ImageSpriteLayer;
import sprite.Sprite;
import sprite.SpriteManager;
import battlefield.CharacterManager;
import character.statistics.StatisticsManager;

public class GameCharacter extends Observable {

	private Sprite characterSprite;
	public Sprite getCharacterSprite() {
		return characterSprite;
	}
	public void setCharacterSprite(Sprite characterSprite) {
		this.characterSprite = characterSprite;
	}

	private StatisticsManager statisticsManager;
	public StatisticsManager getStatisticsManager(){
		return statisticsManager;
	}
	public void setStatisticsManager(StatisticsManager arg){
		statisticsManager=arg;
	}
	
	private int hitPoints;
	public int getHitPoints(){
		return hitPoints;
	}
	public void setHitPoints(int hitPoints) {
		this.hitPoints=hitPoints;
		setChanged();
		notifyObservers();
	}
	
	private int actionPoints;
	public int getActionPoints(){
		return actionPoints;
	}
	public void setActionPoints(int actionPoints) {
		this.actionPoints=actionPoints;
		setChanged();
		notifyObservers();
	}

	private Point gridPosition;
	public Point getGridPosition() {
		return gridPosition;
	}
	public void setGridPosition(Point position) {
		this.gridPosition = position;
	}
	
	private String name;
	public String getName() {
		return name;
	}
	public void setName(String name) {
		this.name = name;
	}
	
	public String getController() {
		return null;
	}
	
	public GameCharacter(){
		/* Character initialization : create the various components of a character and adds it to the list.
		 */
		setStatisticsManager(new StatisticsManager());
		
		CharacterManager.getInstance().add(this);
		
		Sprite spr = new CharacterSprite(400, 200);
		spr.addLayer(new ImageSpriteLayer("Wulfen"));
		spr.setOrientation(Sprite.LOWER_RIGHT);
		SpriteManager.getInstance().add(spr, 19);
		setCharacterSprite(spr);
	}
	
	public static GameCharacter createGameCharacter() {
		return new GameCharacter();
	}

	public void payCost(SkillCost cost) {
		//System.out.println("Paying cost : "+cost);
	}
	public float getStatistic(String statisticKey, SkillContext context) {
		return getStatisticsManager().getStat(statisticKey).getValue(context);
	}
	public void takeDamage(int value, String damageType) {
		setHitPoints(getHitPoints() - value);
	}

}
